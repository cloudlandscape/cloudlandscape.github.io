{% extends "base.html" %}

{% block title %}{{ page.title }} - {{ config.title }}{% endblock %}

{% block content %}
<article class="provider-detail">
    <header class="provider-header">
        <h1>{{ page.title }}</h1>
        {% if page.description %}
        <p class="provider-tagline">{{ page.description }}</p>
        {% endif %}
    </header>

    <section class="provider-meta-grid" aria-label="Provider information">
        {% if page.extra.country %}
        <div class="meta-item">
            <strong>Country of Origin:</strong>
            <span>{{ page.extra.country }}</span>
        </div>
        {% endif %}

        {% if page.extra.headquarters %}
        <div class="meta-item">
            <strong>Headquarters:</strong>
            <span>{{ page.extra.headquarters }}</span>
        </div>
        {% endif %}

        {% if page.extra.founded %}
        <div class="meta-item">
            <strong>Founded:</strong>
            <span>{{ page.extra.founded }}</span>
        </div>
        {% endif %}

        {% if page.extra.website %}
        <div class="meta-item">
            <strong>Website:</strong>
            <a href="{{ page.extra.website }}" target="_blank" rel="noopener noreferrer" class="external-link">
                {{ page.extra.website }}
                <span class="external-icon" aria-label="(opens in new tab)">‚Üó</span>
            </a>
        </div>
        {% endif %}
    </section>

    {% if page.content %}
    <section class="provider-description" aria-labelledby="about-heading">
        <h2 id="about-heading">About</h2>
        <div class="content">
            {{ page.content | safe }}
        </div>
    </section>
    {% endif %}

    {% if page.taxonomies.services %}
    <section class="provider-services" aria-labelledby="services-heading">
        <h2 id="services-heading">Services Offered</h2>
        <p class="section-intro">Services are mapped to unified taxonomy categories for easy comparison across providers.</p>
        <ul class="services-grid" role="list">
            {% for service in page.taxonomies.services %}
            <div class="service-card">
                <span class="service-name">{{ service | replace(from="-", to=" ") | title }}</span>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if page.taxonomies.certifications %}
    <section class="provider-certifications">
        <h2>Certifications & Compliance</h2>
        <p class="section-intro">Verified certifications and compliance attestations.</p>
        <div class="certifications-list">
            {% for cert in page.taxonomies.certifications %}
            <div class="certification-badge">
                <span class="cert-icon">‚úì</span>
                <div class="cert-info">
                    <strong class="cert-name">{{ cert | upper }}</strong>
                    {% if page.extra.certification_links and page.extra.certification_links[cert] %}
                    <a href="{{ page.extra.certification_links[cert] }}" target="_blank" rel="noopener noreferrer" class="cert-link">
                        View Attestation <span class="external-icon">‚Üó</span>
                    </a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if page.extra.datacenter_locations %}
    <section class="provider-datacenters" aria-labelledby="datacenter-heading">
        <h2 id="datacenter-heading">Geographic Coverage</h2>
        <p class="section-intro">Datacenter locations for data residency and latency considerations.</p>
        <ul class="datacenters-list" role="list">
            {% for location in page.extra.datacenter_locations %}
            <li class="datacenter-item">
                <span class="location-icon" aria-hidden="true">üìç</span>
                <span>{{ location }}</span>
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    <div class="provider-actions">
        <a href="/providers/" class="btn btn-secondary">‚Üê Back to All Providers</a>
        <button class="btn btn-primary" data-provider="{{ page.slug }}" aria-label="Add {{ page.title }} to comparison">Add to Comparison</button>
    </div>
</article>
{% endblock %}
