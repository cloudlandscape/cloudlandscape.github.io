{% extends "base.html" %}

{% block title %}{{ section.title }} - {{ config.title }}{% endblock %}

{% block content %}
<h1>{{ section.title }}</h1>

<noscript>
    <style>
        .noscript-message {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .filters-container { display: none; }
    </style>
    <div class="noscript-message">
        <strong>Note:</strong> All providers are visible below. Filtering and search features require JavaScript to be enabled.
    </div>
</noscript>

<div class="filters-container" role="region" aria-label="Search and filter options">
    <div class="search-container">
        <label for="search-input">Search providers</label>
        <input 
            type="search" 
            id="search-input" 
            class="search-input" 
            placeholder="Search by name or description..." 
            aria-label="Search providers by name or description"
        />
    </div>
    
    <button class="filters-toggle" aria-expanded="false" aria-controls="filters-content">
        <span class="toggle-text">Show Filters</span>
    </button>
    
    <div class="filters-content" id="filters-content">
        <h2 id="filters-heading">Filters</h2>
    
    <fieldset class="filter-group">
        <legend>Services</legend>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="compute"> Compute</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="kubernetes"> Kubernetes</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="object-storage"> Object Storage</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="database"> Database</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="paas"> PaaS</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="caas"> CaaS</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="iam"> IAM</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="service" data-filter-value="api-gateway"> API Gateway</label>
    </fieldset>
    
    <fieldset class="filter-group">
        <legend>Certifications</legend>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="cert" data-filter-value="secnumcloud"> SecNumCloud</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="cert" data-filter-value="hds"> HDS</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="cert" data-filter-value="eucs"> EUCS</label>
    </fieldset>
    
    <fieldset class="filter-group">
        <legend>Countries</legend>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="country" data-filter-value="France"> France</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="country" data-filter-value="United States"> United States</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="country" data-filter-value="Germany"> Germany</label>
        <label><input type="checkbox" class="filter-checkbox" data-filter-type="country" data-filter-value="Switzerland"> Switzerland</label>
    </fieldset>
    
    <button class="filter-reset" aria-label="Clear all filters">Reset All Filters</button>
    </div>
</div>

<p class="result-count" role="status" aria-live="polite">
    {{ section.pages | length }} providers available
</p>

{% if section.pages %}
<div class="provider-grid" role="list">
    {% for page in section.pages %}
    <article class="provider-card" role="listitem">
        <h2><a href="{{ page.permalink }}">{{ page.title }}</a></h2>
        <p class="provider-description">{{ page.description }}</p>
        
        <div class="provider-meta">
            {% if page.extra.country %}
            <p><strong>Country:</strong> <span>{{ page.extra.country }}</span></p>
            {% endif %}
            
            {% if page.taxonomies.services %}
            <div class="provider-services">
                <strong>Services:</strong>
                <ul aria-label="Services offered">
                {% for service in page.taxonomies.services %}
                    <li><span class="badge">{{ service }}</span></li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if page.taxonomies.certifications %}
            <div class="provider-certifications">
                <strong>Certifications:</strong>
                <ul aria-label="Certifications held">
                {% for cert in page.taxonomies.certifications %}
                    <li><span class="badge cert-badge">{{ cert }}</span></li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </article>
    {% endfor %}
</div>
{% else %}
<p>No providers found.</p>
{% endif %}

<script src="/filter.js"></script>
{% endblock %}
